
<ion-content class="chat-page-container">
  <!-- <div class="chat-container"> -->
  <!-- lado izquierdo -->
  <!-- <div class="user-side"> -->
  @if(user$ | async; as user) {
  <ion-grid class="chat-grid">
    <ion-row>
      <!-- columna izq -->
      <ion-col size="12" size-md="4" class="left-page">
        <ion-avatar>
          <img [src]="user.photoURL">
        </ion-avatar>
        <ion-text>
          <h6>{{ user.displayName}}</h6>
          <p>{{ user.email }}</p>
        </ion-text>
        <ion-button size="medium" color="medium" (click)="logOut()"> CERRAR SESIÃ“N
          <ion-icon slot="start" name="log-out" class="logout-icon"></ion-icon>
        </ion-button>
        <ion-button [routerLink]="['/home-login']" size="medium" color="medium"> VOLVER A INICIO
          <ion-icon slot="start" name="home" class="home-icon"></ion-icon>
        </ion-button>
      </ion-col>

      <!-- columna derecha -->
      <ion-col size="12" size-md="8" class="right-page">
        <div class="messages-container">
          @for(msg of messages(); track msg) {
          <div class="message"
            [ngClass]="{'my-message': msg.username === user?.displayName, 'other-message':msg.username !== user?.displayName}">
            <div class="header">
            <ion-avatar>
              <ion-img [src]="msg.avatar" class="avatar"></ion-img>
            </ion-avatar>
            <ion-text class="username">{{msg.username}}</ion-text>
            </div>

            <ion-text>{{ msg.message }}</ion-text>
            <small class="date">{{ msg.date }}</small>
          </div>
          }
        </div>


        <form  class="message-form">
          <ion-input
          id="message" type="text"
          [formControl]="messageInput"
          (keyup.enter)="sendMessage()"
          type="text"
          name="message"
          placeholder="Escribe tu mensaje...">
          </ion-input>

          <ion-button (click)="sendMessage()" color="primary">ENVIAR
          <ion-icon slot="end" name="send" class="send-icon"></ion-icon>
          </ion-button>
        </form>

      </ion-col>

    </ion-row>
    <!-- <ion-item>
    <ion-input id="name" type="text" [formGroup]="myForm" placeholder=" Escribe tu mensaje..."></ion-input>
  </ion-item>
  <ion-button (click)="sendMessage()" [disabled]="!textMessage()">Enviar</ion-button> -->
  </ion-grid>
  }
  <!-- </div> -->
</ion-content>

